name: ClinicalVitalStatus
id: https://w3id.org/htan/clinical/vital_status
description: HTAN Clinical Data Model - Vital Status Domain

enums:
  VitalStatusEnum:
    title: vital_status
    permissible_values:
      "Alive":
        description: Alive
      "Deceased":
        description: Deceased
      "Not Reported":
        description: Not provided or available
      "Unknown":
        description: Not known, not observed, not recorded, or refused

  CauseOfDeathEnum:
    title: cause_of_death
    permissible_values:
      "Disease":
        description: Death due to disease
      "Other":
        description: Death due to other causes
      "Not Reported":
        description: Not provided or available
      "Unknown":
        description: Not known, not observed, not recorded, or refused

  CauseOfDeathSourceEnum:
    title: cause_of_death_source
    permissible_values:
      "Autopsy":
        description: Autopsy
      "Death Certificate":
        description: Death certificate
      "Not Reported":
        description: Not provided or available
      "Other":
        description: Other source
      "Unknown":
        description: Not known, not observed, not recorded, or refused

classes:
  VitalStatus:
    description: Information about the vital status
    attributes:
      VITAL_STATUS:
        range: VitalStatusEnum
        required: true
        description: Vital status of the participant (caDSR:2192201) (Aligns to CDRC Standard CDE)
      AGE_IN_DAYS_AT_DEATH:
        range: integer
        required: false
        description: Age in days at death (caDSR:2192202) (Aligns to CDRC Standard CDE)
      CAUSE_OF_DEATH:
        range: CauseOfDeathEnum
        required: false
        description: Cause of death (caDSR:2192203) (Aligns to CDRC Standard CDE)
      CAUSE_OF_DEATH_SOURCE:
        range: CauseOfDeathSourceEnum
        required: false
        description: Source of cause of death (caDSR:2192204) (Aligns to CDRC Standard CDE)
    slot_usage:
      AGE_IN_DAYS_AT_DEATH:
        required: false
        description: Required when VITAL_STATUS is Deceased
      CAUSE_OF_DEATH:
        required: false
        description: Required when VITAL_STATUS is Deceased
      CAUSE_OF_DEATH_SOURCE:
        required: false
        description: Required when VITAL_STATUS is Deceased
    rules:
      - description: "When vital status is deceased, death-related fields become required"
        preconditions:
          slot_conditions:
            VITAL_STATUS:
              equals_string: "Deceased"
        postconditions:
          slot_conditions:
            AGE_IN_DAYS_AT_DEATH:
              required: true
            CAUSE_OF_DEATH:
              required: true
            CAUSE_OF_DEATH_SOURCE:
              required: true 