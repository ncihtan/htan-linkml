@prefix htan: <https://w3id.org/htan/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

htan:BulkWESLevel1 a sh:NodeShape ;
    sh:closed true ;
    sh:description "Bulk Whole Exome Sequencing Level 1 - Raw files" ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:description "Name of the library preparation kit" ;
            sh:maxCount 1 ;
            sh:name "Library Preparation Kit Name" ;
            sh:nodeKind sh:Literal ;
            sh:order 6 ;
            sh:path htan:LIBRARY_PREPARATION_KIT_NAME ],
        [ sh:datatype xsd:string ;
            sh:description "Category of metadata (e.g., Bulk WES Level 1, scRNA-seq Level 2, etc.)" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "Component" ;
            sh:nodeKind sh:Literal ;
            sh:order 25 ;
            sh:path htan:COMPONENT ],
        [ sh:datatype xsd:string ;
            sh:description "Version of the base caller" ;
            sh:maxCount 1 ;
            sh:name "Base Caller Version" ;
            sh:nodeKind sh:Literal ;
            sh:order 13 ;
            sh:path htan:BASE_CALLER_VERSION ],
        [ sh:datatype xsd:string ;
            sh:description "Adapter sequence" ;
            sh:maxCount 1 ;
            sh:name "Adapter Sequence" ;
            sh:nodeKind sh:Literal ;
            sh:order 11 ;
            sh:path htan:ADAPTER_SEQUENCE ],
        [ sh:datatype xsd:string ;
            sh:description "Read indicator" ;
            sh:maxCount 1 ;
            sh:name "Read Indicator" ;
            sh:nodeKind sh:Literal ;
            sh:order 2 ;
            sh:path htan:READ_INDICATOR ],
        [ sh:datatype xsd:string ;
            sh:description "Format of the file (e.g., fastq, bam, vcf, h5ad)" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "File Format" ;
            sh:nodeKind sh:Literal ;
            sh:order 27 ;
            sh:path htan:FILE_FORMAT ],
        [ sh:datatype xsd:integer ;
            sh:description "Lane number" ;
            sh:maxCount 1 ;
            sh:name "Lane Number" ;
            sh:nodeKind sh:Literal ;
            sh:order 19 ;
            sh:path htan:LANE_NUMBER ],
        [ sh:description "Method used for library selection" ;
            sh:in ( "Hybrid Selection" "PCR" "RANDOM" "other" ) ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "Library Selection Method" ;
            sh:order 3 ;
            sh:path htan:LIBRARY_SELECTION_METHOD ],
        [ sh:datatype xsd:string ;
            sh:description "HTAN Biospecimen ID of the parent biospecimen (Primary Key)" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "HTAN Biospecimen ID" ;
            sh:nodeKind sh:Literal ;
            sh:order 31 ;
            sh:path htan:HTAN_BIOSPECIMEN_ID ;
            sh:pattern "^(HTA([1-9]|1[0-6]))_((EXT)?([0-9]\\d*|0000))_([0-9]\\d*|0000)$" ],
        [ sh:datatype xsd:integer ;
            sh:description "Target sequencing depth" ;
            sh:maxCount 1 ;
            sh:name "Target Depth" ;
            sh:nodeKind sh:Literal ;
            sh:order 23 ;
            sh:path htan:TARGET_DEPTH ],
        [ sh:datatype xsd:string ;
            sh:description "HTAN ID associated with a patient based on HTAN ID SOP (Primary Key)" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "HTAN Participant ID" ;
            sh:nodeKind sh:Literal ;
            sh:order 28 ;
            sh:path htan:HTAN_PARTICIPANT_ID ;
            sh:pattern "^(HTA([1-9]|1[0-6]))_((EXT)?([0-9]\\d*|0000))$" ],
        [ sh:description "Library layout (paired-end or single-end)" ;
            sh:in ( "Paired-end" "Single-end" ) ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "Library Layout" ;
            sh:order 1 ;
            sh:path htan:LIBRARY_LAYOUT ],
        [ sh:datatype xsd:string ;
            sh:description "Flow cell barcode" ;
            sh:maxCount 1 ;
            sh:name "Flow Cell Barcode" ;
            sh:nodeKind sh:Literal ;
            sh:order 14 ;
            sh:path htan:FLOW_CELL_BARCODE ],
        [ sh:datatype xsd:string ;
            sh:description "Vendor of the library preparation kit" ;
            sh:maxCount 1 ;
            sh:name "Library Preparation Kit Vendor" ;
            sh:nodeKind sh:Literal ;
            sh:order 7 ;
            sh:path htan:LIBRARY_PREPARATION_KIT_VENDOR ],
        [ sh:datatype xsd:integer ;
            sh:description "Mean fragment length" ;
            sh:maxCount 1 ;
            sh:name "Fragment Mean Length" ;
            sh:nodeKind sh:Literal ;
            sh:order 16 ;
            sh:path htan:FRAGMENT_MEAN_LENGTH ],
        [ sh:datatype xsd:boolean ;
            sh:description "Whether to trim adapter sequence" ;
            sh:maxCount 1 ;
            sh:name "To Trim Adapter Sequence" ;
            sh:nodeKind sh:Literal ;
            sh:order 24 ;
            sh:path htan:TO_TRIM_ADAPTER_SEQUENCE ],
        [ sh:datatype xsd:integer ;
            sh:description "Minimum fragment length" ;
            sh:maxCount 1 ;
            sh:name "Fragment Minimum Length" ;
            sh:nodeKind sh:Literal ;
            sh:order 17 ;
            sh:path htan:FRAGMENT_MINIMUM_LENGTH ],
        [ sh:datatype xsd:string ;
            sh:description "HTAN Data File ID (Primary Key)" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "HTAN Data File ID" ;
            sh:nodeKind sh:Literal ;
            sh:order 29 ;
            sh:path htan:HTAN_DATA_FILE_ID ;
            sh:pattern "^(HTA([1-9]|1[0-6]))_((EXT)?([0-9]\\d*|0000))_([0-9]\\d*|0000)$" ],
        [ sh:datatype xsd:string ;
            sh:description "Name of the file" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "File Name" ;
            sh:nodeKind sh:Literal ;
            sh:order 26 ;
            sh:path htan:FILENAME ;
            sh:pattern "^.+[\\\\/]\\S*$" ],
        [ sh:datatype xsd:string ;
            sh:description "Target capture kit used" ;
            sh:maxCount 1 ;
            sh:name "Target Capture Kit" ;
            sh:nodeKind sh:Literal ;
            sh:order 5 ;
            sh:path htan:TARGET_CAPTURE_KIT ],
        [ sh:datatype xsd:string ;
            sh:description "Multiplex barcode" ;
            sh:maxCount 1 ;
            sh:name "Multiplex Barcode" ;
            sh:nodeKind sh:Literal ;
            sh:order 20 ;
            sh:path htan:MULTIPLEX_BARCODE ],
        [ sh:datatype xsd:string ;
            sh:description "Name of the base caller" ;
            sh:maxCount 1 ;
            sh:name "Base Caller Name" ;
            sh:nodeKind sh:Literal ;
            sh:order 12 ;
            sh:path htan:BASE_CALLER_NAME ],
        [ sh:datatype xsd:string ;
            sh:description "HTAN Parent ID - Foreign Key to parent entity (B for Biospecimen, D for data file)" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "HTAN Parent ID" ;
            sh:nodeKind sh:Literal ;
            sh:order 30 ;
            sh:path htan:HTAN_PARENT_ID ;
            sh:pattern "^(HTA20[0-9])(?:_0000)?(?:_\\d+)?(?:_EXT\\d+)?_(B|D)\\d{1,50}$" ],
        [ sh:datatype xsd:string ;
            sh:description "Sequencing batch identifier" ;
            sh:maxCount 1 ;
            sh:name "Sequencing Batch ID" ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path htan:SEQUENCING_BATCH_ID ],
        [ sh:description "Sequencing platform used" ;
            sh:in ( "ABI_SOLID" "BGISEQ" "CAPILLARY" "COMPLETE_GENOMICS" "HELICOS" "ILLUMINA" "ION_TORRENT" "LS454" "OXFORD_NANOPORE" "PACBIO_SMRT" ) ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "Sequencing Platform" ;
            sh:order 9 ;
            sh:path htan:SEQUENCING_PLATFORM ],
        [ sh:datatype xsd:string ;
            sh:description "Size selection range" ;
            sh:maxCount 1 ;
            sh:name "Size Selection Range" ;
            sh:nodeKind sh:Literal ;
            sh:order 22 ;
            sh:path htan:SIZE_SELECTION_RANGE ],
        [ sh:datatype xsd:integer ;
            sh:description "Maximum fragment length" ;
            sh:maxCount 1 ;
            sh:name "Fragment Maximum Length" ;
            sh:nodeKind sh:Literal ;
            sh:order 15 ;
            sh:path htan:FRAGMENT_MAXIMUM_LENGTH ],
        [ sh:datatype xsd:integer ;
            sh:description "Standard deviation of fragment length" ;
            sh:maxCount 1 ;
            sh:name "Fragment Standard Deviation Length" ;
            sh:nodeKind sh:Literal ;
            sh:order 18 ;
            sh:path htan:FRAGMENT_STANDARD_DEVIATION_LENGTH ],
        [ sh:datatype xsd:string ;
            sh:description "Name of the adapter used" ;
            sh:maxCount 1 ;
            sh:name "Adapter Name" ;
            sh:nodeKind sh:Literal ;
            sh:order 10 ;
            sh:path htan:ADAPTER_NAME ],
        [ sh:datatype xsd:integer ;
            sh:description "Days from index for library preparation" ;
            sh:maxCount 1 ;
            sh:name "Library Preparation Days From Index" ;
            sh:nodeKind sh:Literal ;
            sh:order 21 ;
            sh:path htan:LIBRARY_PREPARATION_DAYS_FROM_INDEX ],
        [ sh:datatype xsd:string ;
            sh:description "Version of the library preparation kit" ;
            sh:maxCount 1 ;
            sh:name "Library Preparation Kit Version" ;
            sh:nodeKind sh:Literal ;
            sh:order 8 ;
            sh:path htan:LIBRARY_PREPARATION_KIT_VERSION ],
        [ sh:datatype xsd:integer ;
            sh:description "Read length in base pairs" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "Read Length" ;
            sh:nodeKind sh:Literal ;
            sh:order 4 ;
            sh:path htan:READ_LENGTH ] ;
    sh:targetClass htan:BulkWESLevel1 .

htan:CoreFileAttributes a sh:NodeShape ;
    sh:closed true ;
    sh:description "Universal attributes that apply to all file-based data in HTAN" ;
    sh:ignoredProperties ( htan:FRAGMENT_MINIMUM_LENGTH htan:FRAGMENT_MAXIMUM_LENGTH htan:LANE_NUMBER htan:BASE_CALLER_VERSION htan:BASE_CALLER_NAME htan:READ_LENGTH htan:FRAGMENT_STANDARD_DEVIATION_LENGTH htan:SEQUENCING_PLATFORM htan:TARGET_DEPTH htan:READ_INDICATOR htan:LIBRARY_PREPARATION_KIT_VERSION htan:LIBRARY_LAYOUT htan:LIBRARY_PREPARATION_KIT_NAME htan:SEQUENCING_BATCH_ID htan:FLOW_CELL_BARCODE htan:TO_TRIM_ADAPTER_SEQUENCE htan:LIBRARY_PREPARATION_KIT_VENDOR htan:FRAGMENT_MEAN_LENGTH htan:ADAPTER_SEQUENCE htan:LIBRARY_SELECTION_METHOD htan:MULTIPLEX_BARCODE htan:ADAPTER_NAME htan:LIBRARY_PREPARATION_DAYS_FROM_INDEX htan:TARGET_CAPTURE_KIT rdf:type htan:SIZE_SELECTION_RANGE ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:description "HTAN Biospecimen ID of the parent biospecimen (Primary Key)" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "HTAN Biospecimen ID" ;
            sh:nodeKind sh:Literal ;
            sh:order 6 ;
            sh:path htan:HTAN_BIOSPECIMEN_ID ;
            sh:pattern "^(HTA([1-9]|1[0-6]))_((EXT)?([0-9]\\d*|0000))_([0-9]\\d*|0000)$" ],
        [ sh:datatype xsd:string ;
            sh:description "HTAN Data File ID (Primary Key)" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "HTAN Data File ID" ;
            sh:nodeKind sh:Literal ;
            sh:order 4 ;
            sh:path htan:HTAN_DATA_FILE_ID ;
            sh:pattern "^(HTA([1-9]|1[0-6]))_((EXT)?([0-9]\\d*|0000))_([0-9]\\d*|0000)$" ],
        [ sh:datatype xsd:string ;
            sh:description "Format of the file (e.g., fastq, bam, vcf, h5ad)" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "File Format" ;
            sh:nodeKind sh:Literal ;
            sh:order 2 ;
            sh:path htan:FILE_FORMAT ],
        [ sh:datatype xsd:string ;
            sh:description "HTAN Parent ID - Foreign Key to parent entity (B for Biospecimen, D for data file)" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "HTAN Parent ID" ;
            sh:nodeKind sh:Literal ;
            sh:order 5 ;
            sh:path htan:HTAN_PARENT_ID ;
            sh:pattern "^(HTA20[0-9])(?:_0000)?(?:_\\d+)?(?:_EXT\\d+)?_(B|D)\\d{1,50}$" ],
        [ sh:datatype xsd:string ;
            sh:description "Category of metadata (e.g., Bulk WES Level 1, scRNA-seq Level 2, etc.)" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "Component" ;
            sh:nodeKind sh:Literal ;
            sh:order 0 ;
            sh:path htan:COMPONENT ],
        [ sh:datatype xsd:string ;
            sh:description "HTAN ID associated with a patient based on HTAN ID SOP (Primary Key)" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "HTAN Participant ID" ;
            sh:nodeKind sh:Literal ;
            sh:order 3 ;
            sh:path htan:HTAN_PARTICIPANT_ID ;
            sh:pattern "^(HTA([1-9]|1[0-6]))_((EXT)?([0-9]\\d*|0000))$" ],
        [ sh:datatype xsd:string ;
            sh:description "Name of the file" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "File Name" ;
            sh:nodeKind sh:Literal ;
            sh:order 1 ;
            sh:path htan:FILENAME ;
            sh:pattern "^.+[\\\\/]\\S*$" ] ;
    sh:targetClass htan:CoreFileAttributes .

